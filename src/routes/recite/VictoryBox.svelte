<script>
    import { draw, fade } from "svelte/transition";
    import { level } from "../stores.js";
    import { cubicOut, expoOut, linear, quadInOut, quadOut } from "svelte/easing";
    let level_path = "M 392.65196,706.83805 C 417.09284,688.62449 433.57661,663.61165 450.17304,644.52129 466.76946,625.43092 499.17209,569.75322 459.90987,602.88335 420.64765,636.01349 377.82287,715.80497 375.78032,764.18114 377.55335,788.32327 408.82756,787.62154 428.7794,776.04223 448.73124,764.46292 477.406,736.33038 489.34212,717.80908 501.27824,699.28778 474.44012,700.88822 463.38277,709.86782 452.32542,718.84742 437.01966,736.94883 437.28121,768.17592 437.54276,799.40301 472.32242,777.80127 491.54104,768.36415 510.75966,758.92703 535.47037,737.4577 554.23266,720.67946 547.40736,736.35228 523.49047,772.66006 544.87114,784.38914 562.96177,785.93042 587.92806,755.324 591.66934,751.87328 595.41061,748.42256 606.33912,731.89622 609.8654,725.74558 620.59021,758.10973 657.71599,749.17184 678.39048,738.56238 688.34197,733.45561 728.63259,702.30901 692.6117,708.169 672.54619,712.65021 634.53917,754.3366 648.93335,777.57518 656.47208,789.74603 669.84896,782.60689 691.6681,773.2858 713.48724,763.96471 730.23248,741.9964 747.53489,725.712 764.8373,709.4276 777.87648,696.09916 790.2384,681.13489 802.60032,666.17062 811.35908,656.08487 813.22716,633.84475 795.73331,620.21655 753.4802,689.53522 744.77291,707.10019 735.33398,726.33403 731.92925,750.72377 739.46238,769.89187 746.99551,789.05996 774.56138,786.95963 792.71869,784.13368 801.63384,782.74615 823.27163,776.54882 825.22359,774.91338"
    let completed_path = "M 993.8868,701.80482 C 964.5712,691.79043 903.976,721.16105 910.9857,764.78242 917.9955,808.40378 986.5123,772.37578 1017.6999,754.95797 1036.1938,744.6294 1068.5945,725.89246 1072.7162,717.74841 1077.6926,707.65259 1052.2737,726.81314 1044.6774,734.64776 1035.1103,744.51501 1020.2415,757.53232 1024.4945,770.60147 1027.6509,780.30082 1043.86,786.61955 1052.3084,783.35891 1063.7472,778.9441 1079.2893,766.7503 1084.0225,752.29861 1088.7558,737.84691 1083.6485,723.18527 1076.597,717.09953 1106.0371,721.59677 1154.4746,689.81274 1170.477,716.70534 1183.6062,738.76921 1118.0569,773.86121 1130.413,785.44449 1143.9271,770.67557 1267.2836,668.87264 1209.3739,744.0608 1198.3074,757.03606 1182.8815,774.85593 1168.2538,784.11108 1176.9453,778.97409 1185.0822,765.1482 1194.9845,758.11196 1208.3203,748.63598 1214.3173,744.0742 1227.4138,734.25494 1279.1061,683.1669 1203.9429,775.62746 1226.3232,787.95333 1241.9278,795.37862 1244.191,803.60693 1303.3831,743.21158 1364.5807,677.56433 1285.0538,768.64386 1280.3775,780.78316 1266.8068,805.17715 1246.8622,838.22411 1223.0088,853.75854 1245.8695,810.99248 1284.0419,766.7133 1320.9034,735.32998 1336.2486,716.16601 1388.5244,714.2685 1369.0981,749.06565 1352.6196,766.46572 1310.4011,793.96395 1287.1073,780.99567 1322.6699,782.91574 1375.823,743.2522 1406.15,722.3622 1433.8494,704.12121 1446.3414,688.84945 1479.4007,650.51884 1452.4615,663.62308 1422.7192,688.92813 1403.2124,714.43154 1382.0721,742.60773 1367.4084,790.27728 1389.3928,784.80913 1405.5292,780.79554 1435.0937,771.01874 1459.0544,759.64061 1483.0152,748.26248 1519.0969,723.70215 1495.0935,724.86415 1418.2597,742.37708 1439.6615,802.35167 1479.4548,781.03272 1539.8987,756.93141 1596.764,712.71933 1634.6628,664.31647 1604.1408,694.36311 1572.8546,754.89664 1554.2337,786.54677 1582.3368,739.95367 1553.3985,749.45779 1551.3354,752.65006 1624.4928,776.41854 1719.2061,706.176 1645.652,726.21225 1595.9802,747.12803 1604.6058,763.50974 1607.6089,782.1454 1613.8167,796.18378 1668.5885,751.0882 1684.6704,746.0743 1696.2244,741.23303 1730.7829,732.73084 1732.132,728.36807 1734.3152,721.30712 1709.8018,728.86995 1701.3056,735.06535 1686.8917,745.57585 1670.5212,764.79536 1674.4994,781.38494 1681.3061,796.47801 1718.9223,750.93812 1737.8313,732.66792 1747.2058,722.6534 1762.5622,714.26381 1770.2437,702.89916 1777.0004,692.90264 1791.1195,664.92055 1785.5431,666.71309 1762.0062,674.70968 1754.0788,701.6148 1744.2329,721.12952 1734.0672,741.27816 1722.4076,761.8103 1730.0687,784.86384 1741.0124,810.21207 1778.4785,736.27514 1794.6932,746.57626"
    let level_completed_path = level_path + " L " + completed_path.slice(1);
</script>


<!-- Garish
<div class="victory_box">
    <div class="victory_text">
        Victory!
    </div>
</div>
-->

<div class="level_completed_box">
    <div class="cursive">
        <svg viewBox="370 470 1450 500" >
            <path
                d={level_path} stroke=gold stroke-width=12 fill=none
                in:draw|global={{duration: 400, easing: linear}}
            />
            <path
                d={completed_path} stroke=gold stroke-width=12 fill=none
                in:draw|global={{delay: 600, duration: 1400, easing: quadOut}}
            />
        </svg>
    </div>
    <div class="background">
    </div>
    <div class="stars_box"
    >
        {#each Array.from({ length: 5 }) as _, i}
            <svg class="star" 
                viewBox="0 -2 115 115" >
                <path d="M 22.882456,109.22232 29.737531,70.253487 1.5221917,42.51442 40.702083,36.991954 58.364484,1.5857291 75.723914,37.141484 114.85522,42.9983 86.404044,70.495431 92.926117,109.52137 57.982896,90.959775 22.882456,109.22232"
                    stroke="black" stroke-width=4 fill={i < $level ? "gold" : "white"}
                    />
            </svg>
        {/each}
    </div>
</div>

<style>
    .level_completed_box {
        position: absolute;
        height: 14%;
        width: 50%;
        right: 0;
        bottom: 10px;
        z-index: 10;
        color: gold;
        transform: translate(-50%, 0);
    }
    .cursive {
    }
    .background {
        top: 0;
        left: 0;
        z-index: -1;
        position: absolute;
        border-radius: 10px;
        height: 100%;
        width: 100%;
        background: black;
        opacity: 0.5;
        box-shadow: 0 0 10px 10px black;
    }
    .stars_box {
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        height: 35%;
        display: flex;
        flex-direction: row;
        justify-content: space-around;
    }
    .star {
        margin: 2%;
        height: 100%;
        width: 20%;  /* necessary to render in firefox, but not for vscode */
        aspect-ratio: 1/1;
    }
</style>